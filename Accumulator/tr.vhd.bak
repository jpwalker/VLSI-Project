library ieee;
USE ieee.std_logic_1164.ALL;
USE ieee.numeric_std.ALL;

ENTITY NOC IS
	PORT(a,b: IN bit_vector(1 DOWNTO 0);
			c: OUT bit_vector(1 DOWNTO 0));
END NOC;

--ARCHITECTURE STATE OF NOC IS
--signal int : bit;
--BEGIN
	--int <= a(0) AND b(0);
	--c(1) <=int AND b(1);
	--c(0) <=int;
--END STATE;

ARCHITECTURE dataflow OF NOC IS
FUNCTION bv2int (bv: bit_vector(1 DOWNTO 0)) RETURN integer IS
VARIABLE res : integer :=0;
BEGIN
	FOR i IN bv'range LOOP
		if bv(i) = '1' then
		IF i = bv'left 
		THEN
		res := res - 2**i;
		ELSE
		res := res + 2**i;
		END IF;
		end if;
	END LOOP;
	RETURN res;
END FUNCTION;

FUNCTION int2bv (int: integer) RETURN bit_vector IS
VARIABLE res_bv : bit_vector(1 DOWNTO 0) ;
VARIABLE a : integer;
BEGIN
	a := int;
	if a < 0 then
		res_bv(res_bv'left) = '1';
		a := a + 2**res_bv'left;
	end if;
	FOR i IN res_bv'left - 1 downto res_bv'right  LOOP
	IF (a - 2**i)>=0 
	THEN 
	res_bv(i):='1';
	a:=a-2**i;
	ELSE res_bv(i):='0';
	END IF;
	END LOOP;
	RETURN res_bv;
END FUNCTION;
BEGIN
	PROCESS(a,b)
	VARIABLE a_int,b_int,c_int : integer;
	BEGIN	
	a_int:=bv2int(a);
	b_int:=bv2int(b);
	c_int:=a_int * b_int;
	c <= int2bv(c_int);
	END PROCESS;
END dataflow;